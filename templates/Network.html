<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Network</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Include Bootstrap and jQuery JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Link to external JavaScript file -->
    <script src="{{ url_for('static', filename='script.js') }}"></script> 
     
</head>
<body>
    <header class="top_boundary">
        <h1><strong>Welcome to my People's page</strong></h1>
    </header>   
    <div class="contianer quote center-div"><strong> Networking isn't how many people you know, it's how many people know you.</strong></div> 
    <br>
    <div class="contianer">
        <h3 class="extra-info">Add Groups</h3>
        <form action="/add_group" method="POST">
            <label for="group_name">Add Groups</label> 
            <div class="input-group-mb-3">

            <input type="text" class="form-control" id="group_name" name="group_name"> 
            <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="submit">Add Group</button>
            </div>

        </form>
    </div> 
    <!--Displaying all groups defined-->
    <div class="container"> 
        <h3>Groups defined: </h3> 
        <br> 
        <ul class="group-list">
        {% for group in groups %}  
            <li>
            <p class="network-group-header">{{ group.name }} 
                <span style="display: inline-flex;"> 
                    <form action="{{ url_for('edit_group', id=group.id) }}" method="GET" style="display: inline;">
                        <button type="submit" class="btn btn-warning">Edit Group</button>
                    </form>
                    
                     
                    <form action="{{ url_for('delete_group', id=group.id) }}" method="POST" style="display: inline"> 
                        <button type="submit" class="btn btn-danger ">Delete Group</button>
                    </form>  
                </span> 
            </p> 
            </li>
            
        {% endfor %} 
        </ul>
    </div> 
    <br>
    <hr>
    <br
    
    <section>
        <div class="container">
            {% for group, persons in persons_by_groups.items() %}
                <div class="mb-4">
                    <h5 class="person-group-header">{{ group }}</h5> 
                    
                    <hr>
                    {% for person in persons %}
                        <div class="row mb-2 person-card">
                            <div class="col-md-3"><strong>Name You Refer To:</strong> {{ person.Person }}</div>
                            <div class="col-md-3"><strong>First Name:</strong> {{ person.FirstName }}</div>
                            <div class="col-md-3"><strong>Last Name:</strong> {{ person.LastName }}</div>
                            <div class="col-md-3"><strong>Birthday:</strong> {{ person.Bday }}</div>
                            <div class="col-md-3"><strong>Contact:</strong> {{ person.Contact }}</div>
                            <div class="col-md-3"><strong>Email:</strong> {{ person.email }}</div>
                            <div class="col-md-3"><strong>Location:</strong> {{ person.Location }}</div>
                            <div class="col-md-3"><strong>Position:</strong> {{ person.Position }}</div>
                            <div class="col-md-3"><strong>Company:</strong> {{ person.Company }}</div>
                            <div class="col-md-3"><strong>Group:</strong> {{ person.Group }}</div>
                            <div class="col-md-3"><strong>Insta/Facebook:</strong> {{ person.Insta_Facebook }}</div>
                            <div class="col-md-3"><strong>Last Contact:</strong> {{ person.LastContact }}</div>
                            <div class="col-md-3"><strong>Last Update:</strong> {{ person.Last_Update }}</div>
                            <div class="row-md-2"> 
                                <form action="{{ url_for('edit_person', id_person=person.id, id_group=person.Group.id) }}" method="POST">
                                    <button type="submit" class="btn btn-info elegant-link">Edit</button>
                                </form>
                                
                                
                                
                                 <!--href tags are by default GET requests-->
                                <form action="{{ url_for('delete_person', id=person.id) }}" method="POST" style="display: inline;"> <!--to define a post request like this-->
                                    <button type="submit" class="btn btn-danger elegant-link">Delete</button>
                                </form>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div> 
    </section>

        <!--html form for adding groups-->
        <div class="container"> 
            <div class="add-group-section">
                <h4>Add</h4>
                <form action="/add_person" method="POST" class="add-group-form">
                    <div class="form-group">
                        <label for="person_name">Name You Refer To:</label>
                        <input type="text" class="form-control" id="person_name" name="person_name" required>
                    </div>
                    <div class="form-group">
                        <label for="first_name">First Name:</label>
                        <input type="text" class="form-control" id="first_name" name="first_name" required>
                    </div>
                    <div class="form-group">
                        <label for="last_name">Last Name:</label>
                        <input type="text" class="form-control" id="last_name" name="last_name" required>
                    </div>
                    <div class="form-group">
                        <label for="birthday">Birthday:</label>
                        <input type="date" class="form-control" id="birthday" name="birthday">
                    </div>
                    <div class="form-group">
                        <label for="contact">Contact:</label>
                        <input type="text" class="form-control" id="contact" name="contact">
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" class="form-control" id="email" name="email" >
                    </div>
                    <div class="form-group">
                        <label for="location">Location:</label>
                        <input type="text" class="form-control" id="location" name="location">
                    </div>
                    <div class="form-group">
                        <label for="position">Position:</label>
                        <input type="text" class="form-control" id="position" name="position">
                    </div>
                    <div class="form-group">
                        <label for="company">Company:</label>
                        <input type="text" class="form-control" id="company" name="company">
                    </div>
                    <div class="form-group">
                        <label for="insta_facebook">Insta/Facebook:</label>
                        <input type="text" class="form-control" id="insta_facebook" name="insta_facebook">
                    </div>
                    <div class="form-group">
                        <label for="LastContact">Last Contact:</label>
                        <input type="datetime-local" class="form-control" id="LastContact" name="LastContact">
                    </div>  
                    <div class="form-group">
                        <label for="last_update">Last Update: </label>
                        <input type="text" class="form-control" id="last_update" name="last_update">
                    </div>
                    <div class="form-group">
                        <label for="group">Group:</label>
                        <select class="form-control" id="group" name="group" required>
                            {% for group in groups %}
                                <option value="{{ group.name }}">{{ group.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Save</button>
                </form> 
            </div>
        </div>
    </div>

    <footer class="top_boundary"></footer>
</body>
</html>
